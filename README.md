# Shop Quần Áo - Laravel 9<p align="center"><a href="https://laravel.com" target="_blank"><img src="https://raw.githubusercontent.com/laravel/art/master/logo-lockup/5%20SVG/2%20CMYK/1%20Full%20Color/laravel-logolockup-cmyk-red.svg" width="400"></a></p>



Ứng dụng web bán quần áo với Laravel 9, có đầy đủ chức năng quản lý sản phẩm, người dùng và phân quyền admin.<p align="center">

<a href="https://travis-ci.org/laravel/framework"><img src="https://travis-ci.org/laravel/framework.svg" alt="Build Status"></a>

## 📋 Mục lục<a href="https://packagist.org/packages/laravel/framework"><img src="https://img.shields.io/packagist/dt/laravel/framework" alt="Total Downloads"></a>

<a href="https://packagist.org/packages/laravel/framework"><img src="https://img.shields.io/packagist/v/laravel/framework" alt="Latest Stable Version"></a>

- [Giới thiệu](#giới-thiệu)<a href="https://packagist.org/packages/laravel/framework"><img src="https://img.shields.io/packagist/l/laravel/framework" alt="License"></a>

- [Tính năng](#tính-năng)</p>

- [Công nghệ sử dụng](#công-nghệ-sử-dụng)

- [Yêu cầu hệ thống](#yêu-cầu-hệ-thống)## About Laravel

- [Cài đặt](#cài-đặt)

- [Cấu trúc thư mục](#cấu-trúc-thư-mục)Laravel is a web application framework with expressive, elegant syntax. We believe development must be an enjoyable and creative experience to be truly fulfilling. Laravel takes the pain out of development by easing common tasks used in many web projects, such as:

- [Bảo mật](#bảo-mật)

- [Tài khoản mẫu](#tài-khoản-mẫu)- [Simple, fast routing engine](https://laravel.com/docs/routing).

- [Powerful dependency injection container](https://laravel.com/docs/container).

## 🎯 Giới thiệu- Multiple back-ends for [session](https://laravel.com/docs/session) and [cache](https://laravel.com/docs/cache) storage.

- Expressive, intuitive [database ORM](https://laravel.com/docs/eloquent).

Đây là bài tập giữa kỳ môn Lập trình Web - Ứng dụng bán quần áo trực tuyến được xây dựng bằng Laravel 9. - Database agnostic [schema migrations](https://laravel.com/docs/migrations).

- [Robust background job processing](https://laravel.com/docs/queues).

**Mục tiêu:**- [Real-time event broadcasting](https://laravel.com/docs/broadcasting).

- Xây dựng ứng dụng web hoàn chỉnh với Laravel

- Áp dụng mô hình MVCLaravel is accessible, powerful, and provides tools required for large, robust applications.

- Thực hành CRUD với Eloquent ORM

- Phân quyền người dùng (Admin/User)## Learning Laravel

- Áp dụng các kỹ thuật bảo mật web

Laravel has the most extensive and thorough [documentation](https://laravel.com/docs) and video tutorial library of all modern web application frameworks, making it a breeze to get started with the framework.

## ✨ Tính năng

If you don't feel like reading, [Laracasts](https://laracasts.com) can help. Laracasts contains over 2000 video tutorials on a range of topics including Laravel, modern PHP, unit testing, and JavaScript. Boost your skills by digging into our comprehensive video library.

### 👥 Chức năng người dùng (Client)

- ✅ Đăng ký / Đăng nhập (Laravel Breeze)## Laravel Sponsors

- ✅ Xem danh sách sản phẩm với phân trang

- ✅ Lọc sản phẩm theo danh mụcWe would like to extend our thanks to the following sponsors for funding Laravel development. If you are interested in becoming a sponsor, please visit the Laravel [Patreon page](https://patreon.com/taylorotwell).

- ✅ Sắp xếp sản phẩm (giá, tên, mới nhất)

- ✅ Xem chi tiết sản phẩm### Premium Partners

- ✅ Xem sản phẩm liên quan

- **[Vehikl](https://vehikl.com/)**

### 🛡️ Chức năng quản trị (Admin)- **[Tighten Co.](https://tighten.co)**

- ✅ Dashboard với thống kê tổng quan- **[Kirschbaum Development Group](https://kirschbaumdevelopment.com)**

- ✅ **CRUD đầy đủ cho Product:**- **[64 Robots](https://64robots.com)**

  - Create: Thêm sản phẩm mới- **[Cubet Techno Labs](https://cubettech.com)**

  - Read: Xem danh sách sản phẩm- **[Cyber-Duck](https://cyber-duck.co.uk)**

  - Update: Chỉnh sửa sản phẩm- **[Many](https://www.many.co.uk)**

  - Delete: Xóa sản phẩm- **[Webdock, Fast VPS Hosting](https://www.webdock.io/en)**

- ✅ Quản lý người dùng (xem, xóa, phân quyền)- **[DevSquad](https://devsquad.com)**

- ✅ Upload và quản lý ảnh sản phẩm- **[Curotec](https://www.curotec.com/services/technologies/laravel/)**

- ✅ Middleware phân quyền (chỉ admin truy cập)- **[OP.GG](https://op.gg)**

- **[WebReinvent](https://webreinvent.com/?utm_source=laravel&utm_medium=github&utm_campaign=patreon-sponsors)**

## 🔧 Công nghệ sử dụng- **[Lendio](https://lendio.com)**



### Backend## Contributing

- **Laravel 9** - PHP Framework

- **MySQL** - DatabaseThank you for considering contributing to the Laravel framework! The contribution guide can be found in the [Laravel documentation](https://laravel.com/docs/contributions).

- **Laravel Breeze** - Authentication

- **Eloquent ORM** - Database operations## Code of Conduct



### FrontendIn order to ensure that the Laravel community is welcoming to all, please review and abide by the [Code of Conduct](https://laravel.com/docs/contributions#code-of-conduct).

- **Blade Template** - Template engine

- **Bootstrap 5** - CSS Framework## Security Vulnerabilities

- **Bootstrap Icons** - Icon library

If you discover a security vulnerability within Laravel, please send an e-mail to Taylor Otwell via [taylor@laravel.com](mailto:taylor@laravel.com). All security vulnerabilities will be promptly addressed.

## 💻 Yêu cầu hệ thống

## License

- PHP >= 8.0

- ComposerThe Laravel framework is open-sourced software licensed under the [MIT license](https://opensource.org/licenses/MIT).

- MySQL >= 5.7
- Node.js & NPM (cho Laravel Breeze)

## 📦 Cài đặt

### 1. Clone repository hoặc giải nén project

```bash
cd shop-quan-ao
```

### 2. Cài đặt dependencies

```bash
# Cài đặt PHP dependencies
composer install

# Cài đặt Node dependencies (cho Breeze)
npm install
npm run dev
```

### 3. Cấu hình môi trường

```bash
# Generate application key (nếu chưa có)
php artisan key:generate
```

### 4. Cấu hình database

Mở file `.env` và cấu hình database:

```env
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=shop_quan_ao
DB_USERNAME=root
DB_PASSWORD=
```

### 5. Tạo database

Tạo database MySQL với tên `shop_quan_ao`:

```sql
CREATE DATABASE shop_quan_ao CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

Hoặc sử dụng phpMyAdmin để tạo database.

### 6. Chạy migration và seeder

```bash
# Chạy migration để tạo các bảng
php artisan migrate

# Chạy seeder để tạo dữ liệu mẫu
php artisan db:seed
```

**Lưu ý:** Lệnh `db:seed` sẽ tạo:
- 3 users (1 admin, 2 users thường)
- 3 categories (Áo, Quần, Phụ kiện)
- 7 products mẫu

### 7. Tạo symbolic link cho storage

```bash
php artisan storage:link
```

Lệnh này tạo liên kết để có thể truy cập ảnh upload từ trình duyệt.

### 8. Khởi chạy ứng dụng

```bash
# Khởi động server
php artisan serve

# Truy cập: http://localhost:8000
```

## 📁 Cấu trúc thư mục

```
shop-quan-ao/
├── app/
│   ├── Http/
│   │   ├── Controllers/
│   │   │   ├── Admin/
│   │   │   │   ├── DashboardController.php
│   │   │   │   ├── ProductController.php
│   │   │   │   └── UserController.php
│   │   │   ├── HomeController.php
│   │   │   └── ProductController.php
│   │   ├── Middleware/
│   │   │   └── IsAdmin.php (Middleware phân quyền admin)
│   │   └── Requests/
│   │       ├── StoreProductRequest.php (Validation thêm SP)
│   │       └── UpdateProductRequest.php (Validation sửa SP)
│   └── Models/
│       ├── User.php (Thêm role, isAdmin())
│       ├── Product.php (belongsTo Category)
│       └── Category.php (hasMany Products)
├── database/
│   ├── migrations/
│   │   ├── 2024_01_01_000001_add_role_to_users_table.php
│   │   ├── 2024_01_01_000002_create_categories_table.php
│   │   └── 2024_01_01_000003_create_products_table.php
│   └── seeders/
│       ├── UserSeeder.php
│       ├── CategorySeeder.php
│       ├── ProductSeeder.php
│       └── DatabaseSeeder.php (Gọi tất cả seeders)
├── resources/
│   └── views/
│       ├── layouts/
│       │   ├── client.blade.php (Layout cho client)
│       │   └── admin.blade.php (Layout cho admin)
│       ├── admin/
│       │   ├── dashboard.blade.php
│       │   ├── products/
│       │   │   ├── index.blade.php (Danh sách)
│       │   │   ├── create.blade.php (Form thêm)
│       │   │   └── edit.blade.php (Form sửa)
│       │   └── users/
│       │       └── index.blade.php
│       ├── products/
│       │   ├── index.blade.php (Danh sách client)
│       │   └── show.blade.php (Chi tiết)
│       └── home.blade.php (Trang chủ)
└── routes/
    └── web.php (Tất cả routes của app)
```

## 🔒 Bảo mật

Ứng dụng áp dụng các kỹ thuật bảo mật:

### 1. CSRF Protection
- Tất cả form đều có `@csrf` token
- Laravel tự động verify token khi submit form

### 2. XSS Protection
- Sử dụng `{{ }}` để escape output trong Blade
- Blade template tự động escape HTML entities

### 3. SQL Injection Prevention
- Sử dụng 100% Eloquent ORM
- Query Builder với parameter binding
- Không có raw query nào

### 4. Authentication & Authorization
- Laravel Breeze cho authentication (login/register)
- Middleware `auth` bảo vệ route cần đăng nhập
- Middleware `admin` chỉ cho admin truy cập `/admin/*`

### 5. Validation
- StoreProductRequest và UpdateProductRequest
- Validation rules đầy đủ cho mọi input
- Custom error messages tiếng Việt

### 6. Session & Cookie Security
- Session sử dụng Laravel default config (secure)
- Cookie được bảo vệ với httpOnly và secure flags
- HTTPS recommended cho production

### 7. File Upload Security
- Validate file type (chỉ chấp nhận image)
- Giới hạn kích thước file (max 2MB)
- Store trong `storage/app/public` (không accessible trực tiếp)

## 👤 Tài khoản mẫu

### 🔴 Admin (Toàn quyền)
- **Email:** admin@example.com
- **Password:** password
- **Quyền:** Administrator - Truy cập tất cả chức năng

### 🔵 User thường
- **Email:** user@example.com
- **Password:** password
- **Quyền:** Chỉ xem sản phẩm

### 🟢 User đăng ký (từ form)
- **Email:** duongqg@gmail.com
- **Password:** password
- **Quyền:** User thường

## 🗂️ Database Schema

### Table: users
| Field | Type | Description |
|-------|------|-------------|
| id | bigint | Primary key |
| name | varchar(255) | Tên người dùng |
| email | varchar(255) | Email (unique) |
| password | varchar(255) | Password (hashed) |
| role | varchar(255) | admin/user (default: user) |
| created_at | timestamp | Ngày tạo |
| updated_at | timestamp | Ngày cập nhật |

### Table: categories
| Field | Type | Description |
|-------|------|-------------|
| id | bigint | Primary key |
| name | varchar(255) | Tên danh mục |
| slug | varchar(255) | Slug (unique) |
| description | text | Mô tả |
| created_at | timestamp | Ngày tạo |
| updated_at | timestamp | Ngày cập nhật |

### Table: products
| Field | Type | Description |
|-------|------|-------------|
| id | bigint | Primary key |
| name | varchar(255) | Tên sản phẩm |
| slug | varchar(255) | Slug (unique) |
| description | text | Mô tả chi tiết |
| price | decimal(10,2) | Giá bán (VNĐ) |
| image | varchar(255) | Đường dẫn ảnh |
| stock | int | Số lượng tồn |
| category_id | bigint | Foreign key → categories |
| created_at | timestamp | Ngày tạo |
| updated_at | timestamp | Ngày cập nhật |

**Quan hệ:**
- `products.category_id` → `categories.id` (CASCADE on delete)
- Một Category có nhiều Products (hasMany)
- Một Product thuộc một Category (belongsTo)

## 📝 Routes

### Client Routes (Public)
```
GET  /                          → Trang chủ (HomeController@index)
GET  /products                  → Danh sách SP (ProductController@index)
GET  /products/{slug}           → Chi tiết SP (ProductController@show)
GET  /login                     → Đăng nhập (Breeze)
POST /login                     → Xử lý đăng nhập
GET  /register                  → Đăng ký (Breeze)
POST /register                  → Xử lý đăng ký
POST /logout                    → Đăng xuất
```

### Admin Routes (Protected: auth + admin middleware)
```
GET    /admin                           → Dashboard
GET    /admin/products                  → Danh sách SP
GET    /admin/products/create           → Form thêm SP
POST   /admin/products                  → Lưu SP mới
GET    /admin/products/{id}/edit        → Form sửa SP
PUT    /admin/products/{id}             → Cập nhật SP
DELETE /admin/products/{id}             → Xóa SP
GET    /admin/users                     → Danh sách users
PATCH  /admin/users/{id}/role           → Đổi role user
DELETE /admin/users/{id}                → Xóa user
```

## 🚀 Chạy project

### Cách 1: Sử dụng php artisan serve (Khuyến nghị cho development)

```bash
# Mở terminal tại thư mục project
cd d:\QuanAo\shop-quan-ao

# Khởi động server
php artisan serve

# Server sẽ chạy tại: http://localhost:8000
```

### Cách 2: Sử dụng XAMPP/WAMP

1. Copy project vào thư mục `htdocs` (XAMPP) hoặc `www` (WAMP)
2. Cấu hình virtual host (optional)
3. Truy cập: `http://localhost/shop-quan-ao/public`

### Test các chức năng

1. **Trang chủ:** http://localhost:8000
2. **Danh sách sản phẩm:** http://localhost:8000/products
3. **Đăng nhập admin:** http://localhost:8000/login
   - Email: admin@example.com
   - Password: password
4. **Admin Dashboard:** http://localhost:8000/admin

## ⚙️ Các lệnh hữu ích

```bash
# Clear cache
php artisan cache:clear
php artisan config:clear
php artisan route:clear
php artisan view:clear

# Migrate fresh (xóa data cũ và tạo lại)
php artisan migrate:fresh --seed

# Xem danh sách routes
php artisan route:list

# Tạo symbolic link cho storage
php artisan storage:link
```

## 🐛 Troubleshooting

### Lỗi: "No application encryption key has been specified"
```bash
php artisan key:generate
```

### Lỗi: "SQLSTATE[HY000] [1049] Unknown database"
- Kiểm tra database đã được tạo chưa
- Kiểm tra thông tin trong file `.env`

### Lỗi: "Class 'App\Http\Middleware\IsAdmin' not found"
```bash
composer dump-autoload
```

### Lỗi: "The storage/public directory could not be found"
```bash
php artisan storage:link
```

### Ảnh upload không hiển thị
```bash
php artisan storage:link
# Sau đó upload lại ảnh
```

## 📚 Tài liệu tham khảo

- [Laravel 9 Documentation](https://laravel.com/docs/9.x)
- [Laravel Breeze](https://laravel.com/docs/9.x/starter-kits#laravel-breeze)
- [Bootstrap 5](https://getbootstrap.com/docs/5.3)
- [Eloquent ORM](https://laravel.com/docs/9.x/eloquent)

## 👨‍💻 Thông tin sinh viên

**Họ tên:** [Điền tên của bạn]  
**MSSV:** [Điền MSSV]  
**Lớp:** [Điền lớp]  
**Môn học:** Lập trình Web  
**Đề tài:** Ứng dụng web bán quần áo  
**Năm học:** 2024-2025

## 📞 Liên hệ

- **Email:** [email@example.com]
- **GitHub:** [github.com/username]

---

## 📌 Ghi chú quan trọng

### Điểm nổi bật của project:

1. ✅ **MVC đầy đủ:** Model, View, Controller tách biệt rõ ràng
2. ✅ **CRUD hoàn chỉnh:** Create, Read, Update, Delete cho Product
3. ✅ **Eloquent Relationships:** belongsTo, hasMany
4. ✅ **Authentication:** Laravel Breeze tích hợp sẵn
5. ✅ **Authorization:** Middleware phân quyền admin
6. ✅ **Validation:** FormRequest với rules đầy đủ
7. ✅ **Security:** CSRF, XSS, SQL Injection prevention
8. ✅ **UI/UX:** Bootstrap 5, responsive, modern design
9. ✅ **Database:** Migration, Seeder, Foreign key
10. ✅ **File Upload:** Xử lý upload ảnh an toàn

### Các tính năng đã implement:

- ✅ Đăng ký / Đăng nhập (Breeze)
- ✅ Trang chủ với danh sách sản phẩm
- ✅ Lọc và sắp xếp sản phẩm
- ✅ Chi tiết sản phẩm + sản phẩm liên quan
- ✅ Admin Dashboard với thống kê
- ✅ Quản lý sản phẩm (CRUD đầy đủ)
- ✅ Upload ảnh sản phẩm
- ✅ Quản lý người dùng
- ✅ Phân quyền admin/user
- ✅ Validation và error handling
- ✅ Session và authentication
- ✅ Responsive design

---

**⭐ Project hoàn chỉnh, sẵn sàng nộp bài! ⭐**

**🎓 Chúc bạn đạt điểm cao! 🎓**
